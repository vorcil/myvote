var RM=RM||{};RM.FORMS=RM.FORMS||{};RM.UTILS=RM.UTILS||{};(function(a){a.fn.bigLink=function(b){var c={target:"a",avoid:"a"};return this.each(function(){if(b){a.extend(c,b)}var d=false;a(this).addClass("bigLink");a(this).find(c.avoid).click(function(f){d=true});a(this).click(function(g){var f=a(this).find(c.target).attr("href");if(typeof(f)!="undefined"&&!d){if(g.metaKey){window.open(f)}else{window.location=f}}})})}})(jQuery);(function(a){a.fn.enterCode=function(b){var c={successClass:"complete",focusOnLoad:true,disableSubmit:true,generateInputs:false};return this.each(function(){if(b){a.extend(c,b)}complete=false;$form=a(this).closest("form");$div=a(this);$orig_input=a("input",$div);var e=a($orig_input).attr("type");var h=a($orig_input).attr("tabindex");$orig_input.hide();a($orig_input).val("0");if(c.generateInputs){$orig_input.attr("maxlength",6);var g="";for(var f=1;f<=6;f++){g+="<input id='field"+f+"'type='"+e+"' name='field"+f+"' tabindex='"+h+"' autocomplete='off' maxlength='1'>"}$orig_input.after(g)}$inputs=a('input[type="'+e+'"]',a(this));$inputs.addClass("multi");$inputs.eq(1).addClass("first-child");if(c.disableSubmit){a('input[type="submit"]',$form).not(".cancel").attr("disabled","disabled")}function d(){count=0;$user_input="";$inputs.each(function(){if(a(this).val()!==""){count++;var i=a(this).attr("name");if(i.indexOf("field")!=-1){$user_input+=a(this).val()}}});if(count===$inputs.length){a($orig_input).val($user_input);return true}else{return false}}if(c.focusOnLoad){$orig_input.removeClass("get_focus");$inputs.eq(1).addClass("get_focus");a(".get_focus").first().focus()}$inputs.each(function(){a(this).keyup(function(i){complete=d();if(complete){$div.addClass(c.successClass);if(c.disableSubmit){a('input[type="submit"]',$form).not(".cancel").removeAttr("disabled")}}else{$div.removeClass(c.successClass);if(c.disableSubmit){a('input[type="submit"]',$form).not(".cancel").attr("disabled","disabled")}}if(a(this).val().length>=a(this).attr("maxlength")){a(this).next("input").focus().select()}if(a(this).val().length===0&&i.keyCode==8){a(this).prev("input").focus().select()}if(i.keyCode==37){a(this).prev("input").focus().select()}});a(this).on("paste",function(){var i=a(this);setTimeout(function(){$currentInputBox=i;var j=$currentInputBox.val();if(j.length==6){var k=j.split("");a(k).each(function(l){var m=a('.multi[name="field'+(l+1)+'"]');m.val(k[l])});a('.multi[name="field6"]').focus()}else{i.val("")}$inputs.attr("maxlength",1)},100);$inputs.attr("maxlength",6)})})})}})(jQuery);RM.FORMS.CAPTCHA=(function(a,b){a.settings={object:{},button:".captcha_kiwi",success:".message",submit:"main_submit",image:".captcha_img",audio_toggle:"audio_toggle",visual_toggle:"visual_toggle",audio:"audio_captcha",visual:"visual_captcha"};a.init=function(d){this.settings.object=d;var c=this.settings;c.submit=b(document.getElementById(c.submit),c.obj);c.img=b(c.image,c.obj);c.button=b(c.button,c.obj);c.audio_toggle=b(document.getElementById(c.audio_toggle),c.obj);c.visual_toggle=b(document.getElementById(c.visual_toggle),c.obj);c.audio=b(document.getElementById(c.audio),c.obj);c.visual=b(document.getElementById(c.visual),c.obj);c.submit.attr("disabled","disabled");c.button.on("click",function(){b(c.success).addClass("active");c.submit.removeAttr("disabled");c.audio.addClass("hide")}).css("cursor","pointer");c.audio_toggle.on("click",function(f){f.preventDefault();a.show_audio()});c.visual_toggle.on("click",function(f){f.preventDefault();a.show_visual()})};a.show_audio=function(){var c=this.settings;c.visual.addClass("hide");c.audio.removeClass("hide")};a.show_visual=function(){var c=this.settings;c.audio.addClass("hide");c.visual.removeClass("hide")};return a})(RM.FORMS.CAPTCHA||{},jQuery);RM.FORMS.DIRECT_FORM=(function(b,a){b.settings={_input_filter:'input[name="direct_form"]'};b.init=function(e,f,d){if(f==undefined){f=this.settings._input_filter}var c,g;c=a("form."+e,$body);g=c.attr("action");a(f,c).change(function(){var i=a(this).attr("data-new-href");if(i!==undefined){c.attr("action",i)}if(d!=undefined){var h=a(document.getElementById(b.settings._show_element_id));if(a(this).val()==="no"){h.show()}else{h.hide()}}})};return b})(RM.FORMS.DIRECT_FORM||{},jQuery);RM.FORMS.COPY_FIELD=(function(b,a){b.init=function(){$triggers=a(".trigger");$triggers.each(function(){$checkbox=a("input",this);$checkbox.on("change",function(){var c=a(this).attr("data-copy-from");var d=a(this).attr("data-paste-to");$copy_from=a("#"+c);copy_from_val=$copy_from.val();$paste_to=a("#"+d);if(a(this).is(":checked")){$paste_to.val(copy_from_val).attr("disabled","disabled");$copy_from.bind("keyup input change",function(){$paste_to.val($copy_from.val()).attr("disabled","disabled")})}else{$paste_to.val(copy_from_val).removeAttr("disabled");$copy_from.unbind("keyup input change")}})})};return b})(RM.FORMS.COPY_FIELD||{},jQuery);RM.UTILS.TOGGLE=(function(b,a){b.settings={_class:"hide",_event:"click",_active:"active"};b.add=function(f,c,e,d){if(e==undefined){e=this.settings._class}if(d==undefined){d=this.settings._event}f.on(this.settings._event,function(g){g.preventDefault();c.toggleClass(e);a(this).toggleClass(b.settings._active)})};return b})(RM.UTILS.TOGGLE||{},jQuery);RM.UTILS.EQUAL_HEIGHT=(function(b,a){b.max_height=0;b.add=function(c){a.each(c,function(d){if(a(this).innerHeight()>b.max_height){b.max_height=a(this).innerHeight()}});a.each(c,function(d){a(this).height(b.max_height+"px")})};return b})(RM.UTILS.EQUAL_HEIGHT||{},jQuery);function name_change(a,b,c){a.click(function(){b.show();a.closest(c).hide()})}function toggle_name_changer(){$inputs=$('input[name="name_change"]');$name_change=$(".name_change");$inputs.on("change",function(){if($(this).val==="no"){$name_change.toggleClass("hide")}else{$name_change.toggleClass("hide")}})}function input_toggle_tooltip(){$inputs=$(".input_toggle_tooltip");$inputs.on("change",function(){var a=$(this).attr("data-tooltip-id");$(".tooltip").hide();$("#"+a).show()})}function fix_ios_zoom(){if(navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var a=document.querySelector('meta[name="viewport"]');if(a){a.content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0";document.body.addEventListener("gesturestart",function(){a.content="width=device-width, minimum-scale=0.25, maximum-scale=1.6"},false)}}}function show_popup(a){a.addClass("active")}function hide_popup(a){a.removeClass("active")}function popup_window(a,b){$("body.touch > div").click(function(){hide_popup(b)});$(".touch").find(a).click(function(c){if(b.hasClass("active")){hide_popup(b)}else{show_popup(b)}c.stopPropagation()});a.click(function(){return false})}RM.init=function(){$html=$(document.documentElement);$body=$("body");$security_check=$(".security_check");$extra_content=$(".extra_content_toggle");$toggle_terms_conditions=$(".toggle_full_tc");$toggle_password_tips=$("#toggle_password_tips");$password_tips=$("#password_tips");$form_identity=$(".form_identity");$form_dashboard_login=$(".form_dashboard_login");$toggle_name_order=$(".toggle_name_order");$name_order=$("#name_order");$big_links=$(".docs section.message",$body);$date_fields=$(".date_fields",$body);$half_module=$(".half_module .module_body",$body);$trigger=$(".trigger",$body);$name_selector_done=$("#name_selector_done",$body);$name_selector_edit=$("#name_selector_edit",$body);$toggle_tooltip=$(".toggle_tooltip",$body);$input_toggle_tooltip=$(".input_toggle_tooltip",$body);$name_has_changed=$("#name_change",$body);$toggle_realme_popup=$(".popup_wrapper",$body);$toggle_agency_close=$(".login .backToAgency a.close");$toggle_message_close=$(".login .message a.close");$html.removeClass("no-js");var a=navigator.userAgent.match(/(IEMobile\/9.0)/);if("ontouchstart" in document||a!==null){$("body").removeClass("no-touch").addClass("touch");RM.touchEvents=true}else{RM.touchEvents=false}fix_ios_zoom();if($security_check.length>0&&!navigator.userAgent.match(/(iPod|iPhone|iPad)/)){$security_check.enterCode({generateInputs:true})}if($date_fields.length>0){$date_fields.enterCode({focusOnLoad:false,disableSubmit:false})}if($half_module.length>0){RM.UTILS.EQUAL_HEIGHT.add($half_module)}if($extra_content.length>0){RM.UTILS.TOGGLE.add($extra_content,$extra_content.siblings(".extra_content"),"hide")}if($name_selector_done.length>0){RM.UTILS.TOGGLE.add($name_selector_done,$("#name_selector"),"off");RM.UTILS.TOGGLE.add($name_selector_edit,$("#name_selector"),"off")}if($toggle_tooltip.length>0){if($("html").hasClass("ie6")===false){popup_window($(".toggle_tooltip"),$(".toggle_tooltip").next())}else{$(".toggle_tooltip").attr("target","_blank");$(".toggle_tooltip").each(function(){this.onclick=null})}}if($input_toggle_tooltip.length>0){input_toggle_tooltip()}if($toggle_realme_popup.length>0){if($("html").hasClass("ie6")===false){popup_window($("a.whats"),$(".popup_wrapper"))}else{$("a.whats").attr("target","_blank")}}if($toggle_password_tips.length>0){RM.UTILS.TOGGLE.add($toggle_password_tips,$password_tips,"hide")}if($toggle_terms_conditions.length>0){RM.UTILS.TOGGLE.add($toggle_terms_conditions,$("#full_tc"),"active")}if($form_identity.length>0){RM.FORMS.DIRECT_FORM.init("form_identity")}if($form_dashboard_login.length>0){RM.FORMS.DIRECT_FORM.init("form_dashboard_login","security-check",'input[name="login_basic"]')}if($trigger.length>0){RM.FORMS.COPY_FIELD.init()}if($toggle_name_order.length>0){name_change($toggle_name_order,$name_order,"#name_order_original")}if($name_has_changed.length>0){toggle_name_changer()}if($toggle_agency_close.length>0){RM.UTILS.TOGGLE.add($toggle_agency_close,$(".login .backToAgency"),"hidden");RM.UTILS.TOGGLE.add($toggle_agency_close,$(".login .returnLeft"),"hidden")}if($toggle_message_close.length>0){$toggle_message_close.on("click",function(b){$(b.target).closest("div.message").addClass("hidden")})}$("#back_to_account").on("click",function(c){c.preventDefault();if(RM.touchEvents===true){var b=confirm("You were in the middle of something pretty important. Do you really want to leave?");if(b===true){window.location="/manage/dashboard"}}else{$("#confirm-exit").removeClass("hide");$("#matte").removeClass("hide")}});$(".continue").on("click",function(b){$("#confirm-exit").addClass("hide");$("#matte").addClass("hide");b.preventDefault()})};$(document).ready(function(){RM.init()});